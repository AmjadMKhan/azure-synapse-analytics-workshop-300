Remove-Module solliance-synapse-automation
Import-Module ".\artifacts\environment-setup\solliance-synapse-automation"

$subscriptionId = "cccbcfbd-0a1f-45ee-b948-2393697c32b0"
$resourceGroupName = "Synapse-L400-Workshop-175799"
$templatesPath = ".\artifacts\environment-setup\templates"
$workspaceName = "asaworkspace03"
$synapseToken = "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkN0VHVoTUptRDVNN0RMZHpEMnYyeDNRS1NSWSIsImtpZCI6IkN0VHVoTUptRDVNN0RMZHpEMnYyeDNRS1NSWSJ9.eyJhdWQiOiJodHRwczovL2Rldi5henVyZXN5bmFwc2UubmV0IiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvY2VmY2I4ZTctZWUzMC00OWI4LWIxOTAtMTMzZjFkYWFmZDg1LyIsImlhdCI6MTU4ODAzNTU4MSwibmJmIjoxNTg4MDM1NTgxLCJleHAiOjE1ODgwMzk0ODEsImFjciI6IjEiLCJhaW8iOiJBU1FBMi84UEFBQUFadit0dnFXRU1WUit4VjFFaGpYTjZmcWhPczhKR1B6ZFEyMjFXTmRnV2NJPSIsImFtciI6WyJwd2QiXSwiYXBwaWQiOiJlYzUyZDEzZC0yZTg1LTQxMGUtYTg5YS04Yzc5ZmI2YTMyYWMiLCJhcHBpZGFjciI6IjAiLCJmYW1pbHlfbmFtZSI6IjE3NTc5OSIsImdpdmVuX25hbWUiOiJPRExfVXNlciIsImlwYWRkciI6Ijc5LjExOC4xLjIyMyIsIm5hbWUiOiJPRExfVXNlciAxNzU3OTkiLCJvaWQiOiIzNzJiN2Q1MS0xNmE0LTQ0NjctOTZlOS1jMTY5ZGUwNTQxYTMiLCJwdWlkIjoiMTAwMzIwMDBCNzQ5Qzk4QSIsInNjcCI6IndvcmtzcGFjZWFydGlmYWN0cy5tYW5hZ2VtZW50Iiwic3ViIjoiQnQ5XzFIc2QxWk5fMk1BVnJZUkd1SnZpRHhDc2JyM3V3UG9jRjRWbFFfYyIsInRpZCI6ImNlZmNiOGU3LWVlMzAtNDliOC1iMTkwLTEzM2YxZGFhZmQ4NSIsInVuaXF1ZV9uYW1lIjoib2RsX3VzZXJfMTc1Nzk5QG1zYXp1cmVsYWJzLm9ubWljcm9zb2Z0LmNvbSIsInVwbiI6Im9kbF91c2VyXzE3NTc5OUBtc2F6dXJlbGFicy5vbm1pY3Jvc29mdC5jb20iLCJ1dGkiOiJENWhIdzNwa20wYTNCS2ZGWkdZeEFBIiwidmVyIjoiMS4wIn0.oUNmQztxDuZmgS7oyVVho0bFW1aePx0OB77FMzmsiTQRiMy577zv65dfKjvond0yYzQBX0IzzLURerYOSHr61Whbc_e9NNCvyjNXs2wEFRJkResQmq7VmYsG8BBbt9iA5sEDMIAgbDg6uLtoAkNOx6Ccas_Mc0LlAEJhH0pkLjmQFiCtpILLJbIWW6kXvD6N7lWb1TeGFaUk0UfaSLR6zTG9FUUMYr3E1YsXuIlZqMj3cTrDiA9WwaU5likdI0F0F8K_04JLdRblxMNX0HqS0DBc4YXHhNey1cZzZnt_xtICOegaz6h3TkAgtxryKyzPwEUJ9GqLO5vrn27ldThTRA"
$managementToken = "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkN0VHVoTUptRDVNN0RMZHpEMnYyeDNRS1NSWSIsImtpZCI6IkN0VHVoTUptRDVNN0RMZHpEMnYyeDNRS1NSWSJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuYXp1cmUuY29tLyIsImlzcyI6Imh0dHBzOi8vc3RzLndpbmRvd3MubmV0L2NlZmNiOGU3LWVlMzAtNDliOC1iMTkwLTEzM2YxZGFhZmQ4NS8iLCJpYXQiOjE1ODgwMzU1ODEsIm5iZiI6MTU4ODAzNTU4MSwiZXhwIjoxNTg4MDM5NDgxLCJhY3IiOiIxIiwiYWlvIjoiNDJkZ1lHRHNQQ1BhMURUNTAwM2hUUmtmSlNYbnp4ZlR0dTdpTVhkK2Z2TEdManVlNjZvQSIsImFtciI6WyJwd2QiXSwiYXBwaWQiOiJlYzUyZDEzZC0yZTg1LTQxMGUtYTg5YS04Yzc5ZmI2YTMyYWMiLCJhcHBpZGFjciI6IjAiLCJmYW1pbHlfbmFtZSI6IjE3NTc5OSIsImdpdmVuX25hbWUiOiJPRExfVXNlciIsImlwYWRkciI6Ijc5LjExOC4xLjIyMyIsIm5hbWUiOiJPRExfVXNlciAxNzU3OTkiLCJvaWQiOiIzNzJiN2Q1MS0xNmE0LTQ0NjctOTZlOS1jMTY5ZGUwNTQxYTMiLCJwdWlkIjoiMTAwMzIwMDBCNzQ5Qzk4QSIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6Ilp4bkh0cnZ1OUVtWVNYX0dXcndSdThTUTBJUmlrZHA5UlI1aFdfaVF4NFUiLCJ0aWQiOiJjZWZjYjhlNy1lZTMwLTQ5YjgtYjE5MC0xMzNmMWRhYWZkODUiLCJ1bmlxdWVfbmFtZSI6Im9kbF91c2VyXzE3NTc5OUBtc2F6dXJlbGFicy5vbm1pY3Jvc29mdC5jb20iLCJ1cG4iOiJvZGxfdXNlcl8xNzU3OTlAbXNhenVyZWxhYnMub25taWNyb3NvZnQuY29tIiwidXRpIjoiRTc5YmNESWxWMEtORFZDcjQ3ZzVBQSIsInZlciI6IjEuMCJ9.Mk-hTso4hJycO_9hOUw4L7oKrRzgIW3BFLGohpPR6cJSP1QaflEN6kfMbfytVPrEjaggZeLaXzHGeWuzi2Y0S88OPooAwji-rDv1DIjT1DcuvbVkUKufYa9CmV37B_hb-aHMNOXZVMykV52HX6bfQaZuFYVk4SC6-jgC72BvcvKWda4JX5hTTW8WlZqkZiLuPfrNCZ6yCajXIikClzE4yAEK2hBzX22sB1DaIr3EHR3CpjAyJbwdWSE8w_KtvfF7IbAglhrrTTcT81Tyu5Gv0kcUjbLjgl0-r5fRpAyancUQw3MgBg6SE7MQCofsGemU50Lr7V6DWnm3vPtNjywnZg"

Create-KeyVaultLinkedService -TemplatesPath $templatesPath -WorkspaceName $workspaceName -Name "asakeyvault03" -Token $synapseToken

Create-IntegrationRuntime -TemplatesPath $templatesPath -SubscriptionId $subscriptionId -ResourceGroupName $resourceGroupName -WorkspaceName $workspaceName -Name "AzureIntegrationRuntime01" -CoreCount 16 -TimeToLive 60 -Token $managementToken

